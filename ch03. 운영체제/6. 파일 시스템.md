# 파일 시스템
- 파일 시스템: 보조기억장치의 정보를 파일 및 디렉터리의 형태로 저장하고 관리할 수 있도록 하는 운영체제 내부 프로그램

## 파일과 디렉터리
### 파일
- 파일
  - 데이터를 저장하는 논리적인 단위
  - 보조기억장치에 저장된 관련 정보의 집합
  - 이름, 파일을 실행하기 위한 정보, 부가 정보 등으로 구성됨
- 부가정보 (메타데이터)
  - 파일 형식, 위치, 크기 등 파일과 관련된 다양한 정보
  - ![1. Linux_파일_속성.png](img/6.%20%ED%8C%8C%EC%9D%BC%20%EC%8B%9C%EC%8A%A4%ED%85%9C/1.%20Linux_%ED%8C%8C%EC%9D%BC_%EC%86%8D%EC%84%B1.png)
  - ![1. windows_파일_속성.png](img/6.%20%ED%8C%8C%EC%9D%BC%20%EC%8B%9C%EC%8A%A4%ED%85%9C/1.%20windows_%ED%8C%8C%EC%9D%BC_%EC%86%8D%EC%84%B1.png)
- 파일 디스크립터 (파일 핸들)
  - 프로그램은 운영체제에게 시스템 콜을 통해, 파일에 접근할 수 있음
  - 파일을 식별하기 위해 운영체제가 할당하는 번호
    - open() 시스템 콜을 통해 파일을 열 때 운영체제가 파일 디스크립터를 할당/반환
    - read(), write(), close() 시스템 콜에서 파일 디스크립터를 인자로 받음
  - 리눅스 등에서는 파이프, 소켓 등도 일종의 파일로 간주함. 0, 1, 2는 각각 표준 입력, 표준 출력, 표준 에러 출력을 의미
### 디렉터리
- 파일을 저장하는 공간 / 폴더 단위로 나뉘어져 있음
- 경로: 파일이나 디렉터리의 위치를 나타나는 정보
  - 절대 경로: 루트 디렉터리를 기준으로 파일이나 디렉터리의 위치를 나타냄
  - 상대 경로: 현재 작업 디렉터리를 기준으로 파일이나 디렉터리의 위치를 나타냄
- 트리 구조 디렉터리
- ![](https://csnote.net/assets/img/os/tree_directory.png)
### 파일 할당
- 운영체제는 파일과 디렉터리를 블록 단위로 읽고 씀
- 연속 할당: 연속된 블록에 파일을 할당하는 것
![](https://user-images.githubusercontent.com/34755287/57186867-72ac2900-6f21-11e9-9542-e68d1eef7e27.png)
  - 특징
    - 순차 접근이 가능하다
    - 직접 접근이 가능하다
  - 문제점
    - 외부 단편화 문제가 발생
    - 실제 크기를 알 수 없다.
    - 크기가 증가하는 파일을 연속적으로 할당하기엔 부적절하다
- 연결 할당: 블록을 서로 연결하여 할당하는 방식
![](https://user-images.githubusercontent.com/34755287/57186868-72ac2900-6f21-11e9-94a6-40054c58852b.png)
  - 특징
    - 블록의 마지막에 주소를 저장하는 포인터 공간이 존재
    - 외부 단편화 문제가 없다
  - 문제점
    - 원하는 블록에 바로 접근할 수 없음
    - 중간 블록의 포인터가 끊어지면, 이후의 모든 블록에 접근하지 못한다.
    - 블록이 흩어져 있으므로, 속도가 느리다.
- 색인 할당: 각 파일 별로 인덱스 블록 번호를 저장한다.
![](https://user-images.githubusercontent.com/34755287/57186870-72ac2900-6f21-11e9-8b3b-531b44ea89ce.png)
  - 특징
    - 할당된 블록을 순서대로 저장하기 때문에 직접 접근이 가능
    - 연속적으로 할당할 필요가 없어, 외부 단편화 문제가 발생하지 않는다.
  - 단점
    - 작은 크기의 파일인 경우에도 하나의 블록을 인덱스 블록으로 사용하여, 저장 공간이 손실된다
    - 하나의 인덱스 블록을 가지고, 큰 파일을 저장할 수 없음
## 파일 시스템
- 파일과 디렉터리를 보조기억장치에 일목요연하게 저장하고 접근할 수 있게 하는 운영체제 내부 프로그램
- 파티셔닝: 저장 장치의 논리적인 영역을 나누는 작업
- 포맷팅: 파일 시스템을 설정하고, 새로운 데이터를 쓸 준비를 하는 작업

### 아이노드 기반 파일 시스템
- 아이노드 (inode): 유닉스 파일 시스템에서의 색인 블록으로, 파일 속성 정보와 파일 데이터 위치가 저장
- 하드 링크 파일: 원본 파일과 같은 아이노드를 공유하는 파일
![](https://csnote.net/assets/img/os/hard_link.png)
- 심블릭 링크 파일: 원본 파일 주소를 가리키는 파일
![](https://csnote.net/assets/img/os/symbolic_link.png)

### 마운트
- 저장 장치의 파일 시스템에서 다른 저장 장치의 파일 시스템에 접근할 수 있도록 파일 시스템을 편입시키는 작업

## 추가학습
### 전원 버튼을 누르고 부팅이 되기까지
- 전원 공급 및 초기화: 전원 버튼을 누르면 SMPS(전원 공급 장치)에서 필요한 전력을 공급하여 컴퓨터 내부 부품들이 활성화됩니다. 
- BIOS/UEFI: 메인보드의 펌웨어인 BIOS 또는 UEFI가 가장 먼저 실행되어 시스템의 하드웨어를 확인하고 초기화합니다. 
- 부팅 순서 확인: BIOS/UEFI는 설정된 부팅 순서에 따라 부팅 가능한 장치를 찾습니다. 일반적으로 저장 장치(SSD/HDD)로 설정되어 있으며, 이 순서에 따라 부팅이 시작됩니다. 
- 운영체제 로딩: 운영체제(예: Windows)가 저장 장치에서 로드되기 시작합니다. 이 단계에서 "빠른 시작 켜기"와 같은 기능이 적용되어 부팅 시간을 단축시킬 수 있습니다. 
- 로그인 및 시스템 시작: 마지막으로 운영체제 로그인 화면이 표시되고, 사용자가 로그인하면 모든 시스템이 정상적으로 시작됩니다.

### 가상 머신과 컨테이너
- 가상 머신 (Virtual Machine, VM)
  - 하이퍼바이저(예: VMware, VirtualBox)를 사용하여 물리적 하드웨어 위에 독립적인 운영체제를 실행
  - 각 VM은 자체 커널과 운영체제를 가지고 있어 완전한 격리 환경 제공
  - 리소스 오버헤드가 크고, 부팅 시간이 길 수 있음
- 컨테이너 (Container)
  - 호스트 운영체제의 커널을 공유하면서 애플리케이션과 그 종속성을 패키징
  - Docker, Kubernetes 등이 대표적인 컨테이너 기술
  - 가볍고 빠르며, 리소스 효율성이 높음

# 참고자료
- https://velog.io/@codemcd/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9COS-18.-%ED%8C%8C%EC%9D%BC-%ED%95%A0%EB%8B%B9
- 