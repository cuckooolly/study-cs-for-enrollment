# RAID

## RAID (Redundant Array of Independent Disks)
- 여러 개의 독립적인 보조기억장치를 하나의 보조기억장치처럼 사용하는 기술
- RAID0: 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 RAID 구성 방식
  - 단점: 하나의 디스크에 문제가 생기면, 정보가 손실되는 문제가 생김
  - ![](https://csnote.net/assets/img/arch/raid0.png)
- RAID1: 복사본을 만드는 RAID 구성 방식
  - 장점: 데이터를 안전하게 보관할 수 있다
  - 단점: 사용가능한 용량이 적어진다
  - ![](https://csnote.net/assets/img/arch/raid1.png)
- RAID4: 오류를 검출하고 복구하기 위한 정보(패리티)를 저장한 장치를 두는 RAID 구성 방식
  - 단점: 패리티를 저장하는 장치에 병목현상이 발생
  - ![](https://csnote.net/assets/img/arch/raid4.png)
- RAID5: 패리티 정보를 분산하여 저장해 RAID 4의 병목현상 문제를 해소한 RAID 구성 방식
  - 안정성은 높지만 2개의 패리티를 사용하여, 쓰기 속도가 낮아지는 문제가 발생
  - ![](https://csnote.net/assets/img/arch/raid5.png)
- RAID6: 서로 다른 두 개의 패리티를 두는 RAID 구성 방식
  - ![](https://csnote.net/assets/img/arch/raid6.png)

# 입출력 기법

## 장치 컨트롤러와 장치 드라이버
- 장치 컨트롤러: 입출력장치와 CPU의 연결 및 통신을 중개하는 장치 (하드웨어)
- 장치 드라이버: 장치 컨트롤러의 동작을 감지하고 제어함으로써 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램 (소프트웨어)

## 프로그램 입출력
- 프로그램 입출력: 프로그램 속 명령어로 입출력 작업을 수행하는 방법
  - 고립형 입출력: 메모리를 위한 주소 공간과 입출력장치를 위한 주소 공간을 분리하는 프로그램 입출력의 일종
  - 메모리 맵 입출력: 메모리에 접근하기 위한 주소 공간과 입출력장치에 접근하기 위한 주소 공간을 하나의 주소 공간으로 간주하는 프로그램 입출력의 일종

## 인터럽트 기반 입출력: 다중 인터럽트
- 여러 인터럽트가 발생한 경우에는, 우선순위가 높은 인터럽트를 우선적으로 처리한다
  - 처리 중인 인터럽트보다 들어온 인터럽트의 우선 순위가 낮다면, 현재 처리 중인 인터럽트가 끝난 후에 처리
  - 처리 중인 인터럽트보다 들어온 인터럽트의 우선 순위가 높다면, 현재 처리 중인 인터럽트를 잠시 중단하고, 들어온 인터럽트를 처리한 후에 다시 원래 처리하던 인터럽트를 이어서 처리
- 인터럽트 비트가 설정되어 있거나, NMI(Non-Maskable Interrupt)가 발생한 인터럽트가 존재하는 경우, 해당 인터럽트를 우선적으로 처리
  - NMI(Non-Maskable Interrupt): 인터럽트 비트를 비활성화해도 무시할 수 없는 인터럽트
- 프로그래머블 인터럽트 컨트롤러(PIC; Programmable Interrupt Controller): 장치 컨트롤러에서 보낸 하드웨어 인터럽트 요청들의 우선순위를 판별한 뒤 CPU에 지금 처리해야 할 하드웨어 인터럽트는 무엇인지 알려주는 장치

## DMA(Direct Memory Access) 입출력
- DMA(Direct Memory Access): 입출력장치와 메모리가 CPU를 거치지 않고도 상호작용할 수 있는 입출력 방식
- DMA 컨트롤러: DMA 입출력을 하기 위해서 필요한 시스템 버스에 연결된 하드웨어
- DMA 입출력 과정
  - CPU가 DMA 컨트롤러에게 입출력 작업을 명령 (입출력장치의 주소, 수행할 연산, 연산할 메모리 주소 등의 정보 전달)
  - DMA 컨트롤러가 장치 컨트롤러와 상호작용 하며 입출력 작업을 수행
    - DMA 컨트롤러는 필요한 경우, 메모리에 직접 접근하여 정보를 읽거나 씀
    - 입출력장치와 메모리 사이에 주고 받을 데이터가 CPU를 거치지 않게 됨
  - DMA 컨트롤러는 입출력 작업이 끝나면, CPU에 인터럽트를 걸어 작업이 끝났음을 알림
- 사이클 스틸링: CPU 입장에서 DMA 컨트롤러가 시스템 버스를 사용하는 것을 의미하는 현상
- 이 기능을 이용해서, 게임 핵을 사용하기도 한다: [https://www.thisisgame.com/articles/400445](https://www.thisisgame.com/articles/400445)

## PCIe(Peripheral Component Interconnect Express)
- PCIe(Peripheral Component Interconnect Express): 컴퓨터 내부의 고속 입출력 장치들을 연결하는 고속 직렬 컴퓨터 확장 버스 표준
- PCIe 구조
  - 레인(Lane): PCIe에서 데이터를 주고받는 통로 / 정보를 송수신하는 단위
    - 레인의 수가 2,4,8개가 되면, 송수신할 수 있는 양도 2,4,8배로 증가
  - 슬롯(Slot): PCIe 장치를 꽂는 자리 / 여러 입출력장치들을 PCIe 버스와 연결해 주는 통로

## GPU의 용도와 처리방식
- GPU(Graphics Processing Unit): 그래픽 처리 장치
  - CPU가 컴퓨터의 전반적인 작업을 처리하는 반면, GPU는 그래픽과 관련된 작업을 전문적으로 처리
  - 그래픽 처리와 같은 다량의 코어 연산(병렬 연산)을 위해 만들어진 입출력 프로세서 
  - CPU에 비해 코어 수가 많지만 CPU의 코어만큼 복잡한 연산을 수행하지는 못함
- GPU의 작업을 처리하는 방식
  ```C
  #include <stdio.h>
  
  __global__ void cuda_hello() {
        // 디바이스 코드: GPU가 실행할 코드
        printf("Hello, GPU!\n");
  }
  
  int main() {
        // 호스트 코드: CPU가 실행할 코드
        cuda_hello<<<1, 1>>>(); // GPU로 하여금 디바이스 코드를 호출하는 코드
        cudaDeviceSynchronize();
        return 0;
  }
  ```
