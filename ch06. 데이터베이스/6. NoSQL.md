# NoSQL

## RDBMS vs NoSQL: NoSQL의 종류
- 키-값 데이터베이스
  - 레코드를 키와 값의 쌍으로 저장하는 데이터베이스
  - 빠른 데이터 액세스가 가능
- 인-메모리 데이터베이스
  - 데이터를 보조기억장치가 아닌 메모리에 저장
  - 빠른 데이터베이스 접근 속도를 제공
- 도큐먼트 데이터베이스
  - 레코드를 도큐먼트라는 단위로 저장하고 관리하는 데이터베이스
  - JSON, BSON 형태로 데이터를 저장
- 그래프 데이터베이스
  - 데이터를 그래프의 노드 형태로 저장
  - 복잡한 관계 데이터를 효율적으로 관리
- 칼럼 패밀리 데이터베이스
  - 열을 기준으로 데이터를 저장하는 데이터베이스
  - 대용량 데이터 처리에 적합

## 다양한 NoSQL: MongoDB와 Redis 맛보기

### MongoDB
- 도큐먼트 지향 데이터베이스
```
use 데이터베이스 이름 # 데이터베이스 생성/사용
db.createCollection("컬렉션 이름") # 컬렉션 생성
```
- 도큐먼트를 확인하는 방법
```
db.컬렉션이름.find() # 컬렉션의 모든 도큐먼트 확인
db.컬렉션이름.find( { 필드: 값 } ) # 조건에 맞는 도큐먼트 확인
```
- 삽입하는 방법
  - 단일 레코드를 삽입하는 방법
  ```
    db.컬렉션이름.insertOne(
        {
        필드1: 값1,
        필드2: 값2,
        ...
        }
    )
  ```
  - 여러 레코드를 삽입하는 방법
  ```
    db.컬렉션이름.insertMany(
        [
        {
            필드1: 값1,
            필드2: 값2,
            ...
        },
        {
            필드1: 값1,
            필드2: 값2,
            ...
        },
        ...
        ]
    )
  ```
- 삭제하는 방법
  - 단일 도큐먼트를 삭제하는 방법
  ```
    db.컬렉션이름.deleteOne(
        { 필드: 값 } # 조건
    )
  ```
  - 여러 도큐먼트를 삭제하는 방법
  ```
    db.컬렉션이름.deleteMany(
        { 필드: 값 } # 조건
    )
  ```
- 갱신하는 방법
  - 단일 도큐먼트를 갱신하는 방법
  ```
    db.컬렉션이름.updateOne(
        { 필드: 값 }, # 조건
        { $set: { 필드1: 새로운값1, 필드2: 새로운값2, ... } } # 갱신할 내용
    )
  ```
  - 단일 필드를 삭제하는 방법
  ```
      db.컬렉션이름.updateOne(
          { 필드: 값 }, # 조건
          { $unset: { 삭제할필드: "" } } # 삭제할 필드
      )
  ```
  - 여러 도큐먼트를 갱신하는 방법
  ```
    db.컬렉션이름.updateMany(
        { 필드: 값 }, # 조건
        { $set: { 필드1: 새로운값1, 필드2: 새로운값2, ... } } # 갱신할 내용
    )
  ```
  - 여러 필드를 삭제하는 방법
  ```
      db.컬렉션이름.updateMany(
          { 필드: 값 }, # 조건
          { $unset: { 삭제할필드1: "", 삭제할필드2: "", ... } } # 삭제할 필드
      )
  ```
### Redis
- 문자열을 다룰 때 사용가능한 명령어

| 종류    | 설명                     |
|-------|------------------------|
| SET   | 문자열 값 저장               |
| SETNX | 키가 존재하지 않을 때만 문자열 값 저장 |
| GET   | 문자열 값 조회               |
| MGET  | 여러 키의 문자열 값 조회         |
| DEL   | 키 삭제                   |

- 리스트와 관련된 명령어

| 종류     | 설명                      |
|--------|-------------------------|
| LPUSH  | 리스트의 왼쪽(앞)에 값 추가        |
| RPUSH  | 리스트의 오른쪽(뒤)에 값 추가       |
| LPOP   | 리스트의 왼쪽(앞)에서 값 제거 및 반환  |
| RPOP   | 리스트의 오른쪽(뒤)에서 값 제거 및 반환 |
| LRANGE | 리스트의 특정 범위의 값 조회        |
| LLEM   | 리스트 길이 반환               |

## 데이터베이스 분할과 샤딩
- 데이터베이스 분할: 테이블을 물리적으로 분할하여, 분산 환경에서 데이터베이스를 효율적으로 관리하는 기술
  - 수평적 분할: 테이블의 행을 기준으로 테이블을 나누어 저장하여, 데이터의 일부분만을 효율적으로 관리
  - 수직적 분할: 테이블의 열을 기준으로 테이블을 나누어 저장하여, 데이터의 특정 부분만을 효율적으로 관리
  - 범위 분할: 레코드 데이터가 가질 수 있는 범위를 정의하고, 해당 범위를 기준으로 테이블을 나누는 방식
  - 목록 분할: 레코드 데이터가 특정 목록에 포함된 값을 가질 경우, 해당 레코드를 별도의 테이블로 분할
  - 해시 분할: 특정 열 데이터에 대한 해시 값을 기준으로 테이블을 분할하여, 데이터를 균등하게 분산
  - 키 분할: 특정 키를 기준으로 테이블을 분할하여, 데이터를 효율적으로 관리
- 샤딩: 분할된 테이블을 별개의 데이터베이스 서버에 분산하여 저장하는 기술로, 대규모 데이터를 효율적으로 관리<br>
    ![](https://csnote.net/assets/img/db/sharding.png)
- 샤드: 샤딩을 통해 분할된 데이터베이스이 각 단위로, 각 샤드는 독립적인 데이터베이스로 동작 
