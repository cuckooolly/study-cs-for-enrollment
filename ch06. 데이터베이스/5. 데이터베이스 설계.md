# 데이터베이스 설계
## E-R 다이어그램
- 데이터베이스에 저장되는 엔티티의 구조를 모델링한 다이어그램
- 엔티티, 속성, 관계를 도식화
  - 엔티티(Entity) : 현실 세계에서 독립적으로 존재하는 객체 // 각 행
  - 속성(Attribute) : 엔티티가 가지는 특성 // 각 열
  - 관계(Relationship) : 엔티티 간의 연관성 // 열 간의 관계
- ERD 표기 방법
  - 피터첸 표기법: 전통적인 형태의 ERD 표기 방식으로, 엔티티와 관계를 다이어그램으로 표현<br>
    ![](https://csnote.net/assets/img/db/peterchen.png)
  - IE 표기법: 정보 엔지니어링 표기법으로, 테이블 간의 관계를 직관적으로 표현<br>
    ![](https://csnote.net/assets/img/db/ie.png)
    - IE 표기법에서의 연관 관계 표시<br>
      ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FEjfOI%2FbtrJm7HOljU%2FAAAAAAAAAAAAAAAAAAAAAIt8j1Ak-iVrRLPj4sfofiyCVzgImVDp8pqoDmA2VuWK%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3DQIi2ADKT4JukhNTHIaAk3IAr9Wc%253D)
    - 식별/비 식별 관계
      - 식별 관계: 참조되는 엔티티가 존재해야지만 참조하는 엔티티가 존재할 수 있는 관계
      - 비 식별 관계: 참조되는 엔티티가 존재하지 않아도 참조하는 엔티티가 존재할 수 있는 관계
## 정규화
- 데이터베이스 설계 과정에서 테이블의 데이터 중복을 최소화
- 일관성을 유지하기 위해 테이블을 분해하는 과정<br>
  ![](https://csnote.net/assets/img/db/normalization.png)

### 제1 정규형
- 모든 속성이 원자값(더 이상 분해할 수 없는 값)을 가져야 함
- 예시
  - 정규화가 필요한 테이블<br>
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FNRCAQ%2Fbtrj110vGrs%2FAAAAAAAAAAAAAAAAAAAAAHAPtPd4gE0FZuGryNVQ-DzbaDBkbxoSPNXSovEA1ij9%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3D5hlCcuvt785irf8femX38KFImV8%253D)
  - 제1 정규형으로 변환된 테이블<br>
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FVJ4EU%2Fbtrj2ABojKV%2FAAAAAAAAAAAAAAAAAAAAAPJMG4hX4QIwPuN9w2h26GnjG_ujVQ23uPChY_MD-27H%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3DQHsbAbRkEtiuEAUhClTbK%252Bp%252BR6A%253D)

### 제2 정규형
- 제1 정규형을 만족함과 동시에, 기본 키가 아닌 모든 필드들이 모든 기본키에 완전히 종속될 것을 만족하는 상태를 의미
- 부분 함수 종속성이 없는 상태이면서, 완전 함수 종속인 상태를 의미
  - 부분 함수 종속성: 기본 키가 아닌 필드가 기본 키의 일부에 종속되어 있는 경우
  - 완전 함수 종속성: 기본키 전체에 종속되어 있는 경우
- 예시
  - 정규화가 필요한 테이블<br>
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FpwqKp%2Fbtrj2WEouSq%2FAAAAAAAAAAAAAAAAAAAAAAzOWapf02PR6gy5hSHm3g8zsgrDn9lJRrMAbXtt-FKR%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3Dyq4IseIS15pc6aJ6%252BKF1SiS%252BE3M%253D)
  - 제2 정규형으로 변환된 테이블<br>
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FskXwR%2Fbtrj0U2B6V9%2FAAAAAAAAAAAAAAAAAAAAAGXcTnMKn3rtEeSiNjJ1HAm_5MCPLdh4vqUqp3Utx4_i%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3DWIXt%252FKFNKa%252Bk2xNQ%252BgrcpqDAboI%253D)

### 제3 정규형
- 제2 정규형을 만족함과 동시에, 기본 키가 아닌 모든 필드들이 기본 키에 이행적으로 종속되지 않는 상태를 의미
- 이행적 함수 종속성이 없는 상태
  - 이행적 함수 종속성: 기본 키가 아닌 필드가 다른 기본 키가 아닌 필드에 종속되어 있는 경우
- 예시
  - 정규화가 필요한 테이블<br>
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FxUsSs%2Fbtrj4sJJchb%2FAAAAAAAAAAAAAAAAAAAAAFytfRNBZCVj6nLeDhNm_zfjCqbLV6nfIW8CxMJ_Rs__%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3DERZEu4UX0tHesY4HG8j1jS9Qjl4%253D)
  - 제3 정규형으로 변환된 테이블<br>
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdYnxPO%2FbtrP8O3VPDg%2FAAAAAAAAAAAAAAAAAAAAAN4JttMHdigevng5h9MeAsI2F_hqb6Ww4BUvxLyFue2k%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3DeBca9457vz3k17KLNJPFl3anbCI%253D)

### 보이스/코드 정규형
- 제3 정규형을 만족함과 동시에, 모든 결정자가 후보 키가 되는 상태를 의미
  - 결정자: 어떤 속성의 값을 결정하는 속성
  - 후보 키: 테이블에서 각 행을 고유하게 식별할 수 있는 속성의 집합
- 예시
  - 정규화가 필요한 테이블<br>
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FtpoYs%2Fbtrj0WF7W9S%2FAAAAAAAAAAAAAAAAAAAAAM4VAV7ZrUe3RflREskWyZuowx3cSVuenws8o4kpVWw3%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3D4vWAC%252FvXgt8WYQiyhoT63LvqMFw%253D)
  - 보이스/코드 정규형으로 변환된 테이블<br>
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbDpCpQ%2FbtrP9j99LpS%2FAAAAAAAAAAAAAAAAAAAAAC3Oqkv7O03FnpsMBpwdHMSLtA2zKu2fFRLR-V3XVdZN%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1769871599%26allow_ip%3D%26allow_referer%3D%26signature%3DkgUlfnF5janYUINcKpsHIDLpjnw%253D)

### 역정규화
- 정규화를 하다보면 테이블이 쪼개지는 현상을 보임
- 조인 연산이 빈번해지면서 성능 저하가 발생할 수 있음
- 이를 해결하기 위해 역정규화를 통해 성능을 향상시키는 방법
- 역정규화 기법
  - 중복 데이터 허용: 자주 조회되는 데이터를 중복 저장하여 조회 성능 향상
  - 요약 데이터 추가: 집계된 데이터를 별도의 컬럼이나 테이블에 저장하여 계산 비용 절감
  - 조인 연산 최소화: 자주 사용되는 조인 연산을 줄이기 위해 테이블 구조를 변경
  - 캐싱: 자주 조회되는 데이터를 메모리에 저장하여 빠른 접근 가능

# 참고자료
- https://csnote.net/
- https://s205203.tistory.com/57
- https://code-lab1.tistory.com/48